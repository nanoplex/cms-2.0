(function(){"use strict";var n=document.getElementById("page"),i,e;n.ready=function(){n.changeView("view-loading")};n.handleAuth=function(t){t=t.detail.response;n.changeView("view-loading");t==="True"?n.$.ajaxSite.go():t==="False"&&n.changeView("view-login")};n.handleLogin=function(t){t=t.detail.response;t==="true"?(n.email=null,n.password=null,n.$.ajaxAuth.go()):i.innerHTML=t};n.handleSite=function(t){t=t.detail.response;document.querySelector("header").removeAttribute("hidden");document.getElementById("add").removeAttribute("hidden");t!==null&&(n.Site=t,n.LastPage!==undefined&&n.LastPage!=="view-loading"?n.changeView(n.LastPage):n.changeView(n.Site.Pages[0].Name),console.log("site",n.Site))};var r=!1,u=!1,o=!1,t,f;n.startPageSelect=function(n){r=!1;u=!1;document.querySelector("core-drawer-panel").setAttribute("disableSwipe","true");setTimeout(function(){if(!r){var i=document.querySelector("nav section[data-id='"+n+"']");t=undefined;u=!0;i.setAttribute("class","drag");window.onmousemove=function(n){t==undefined&&(t=n.clientY);f=n.clientY;i.setAttribute("style","top:"+(f-t)+"px")}}},500)};n.endPageSelect=function(i,e,o){if(u){window.onmousemove=undefined;var h=f-t,c=document.querySelectorAll("nav section[data-id]")[0].offsetHeight,s=Math.round(o+h/-c);s=s>o?s+1:s-1;n.$.ajaxEditPage.params='{"id":"'+i+'","name":"'+e+'","order":'+s+"}";n.$.ajaxEditPage.go()}else n.changeView(e),r=!0;document.querySelector("core-drawer-panel").setAttribute("disableSwipe","false")};n.login=function(){var t=document.querySelector("input[name=email]"),r=t.validity.valid,u=document.querySelector("input[name=password]"),f=u.validity.valid;i=document.querySelector("section[data-pagename=view-login] .status");r&&f?(n.injectBoundHTML("<paper-spinner active><paper-spinner/>",i),n.$.ajaxLogin.go()):(r?f||u.focus():t.focus(),i.innerHTML="")};n.deletePage=function(t){n.$.ajaxDeletePage.params='{"id":"'+t+'"}';n.$.ajaxDeletePage.go();o=!1};n.addPage=function(){var t=document.querySelector("nav section:nth-child(4)"),i;t===null&&(t=document.querySelector("nav section:nth-child(3)"));i=t!=null?parseInt(t.getAttribute("data-order"),10)+1:0;n.$.ajaxAddPage.params='{"name":"'+n.newPageName+'","order":'+i+"}";n.status("page added",function(){n.$.ajaxAddPage.go()});n.LastPage=undefined;n.newPageName=null};n.changeView=function(t){n.LastPage=n.SelectedPage;n.SelectedPage=t;n.setTitle()};n.setTitle=function(){var t=document.querySelector("title");n.injectBoundHTML(n.SelectedPage.replace(/^view-/,"").replace(/-/g," ")+" - Admin",t)};n.home=function(){n.changeView(n.LastPage)};e=!0;n.status=function(t,i){var r=document.getElementById("status"),f=r.querySelector("p"),u=r.querySelector("button");n.home();f.innerHTML=t;i!==undefined?u.onclick=function(){e=!1;r.setAttribute("hidden","")}:u.setAttribute("hidden","");r.removeAttribute("class");setTimeout(function(){e&&(i(),r.setAttribute("hidden",""))},5e3)};n.toggleNav=function(){document.querySelector("core-drawer-panel").togglePanel()};n.toggleAddOptions=function(){n.$.addOptions.getAttribute("hidden")==null?n.$.addOptions.setAttribute("hidden",""):(n.$.addOptions.removeAttribute("hidden"),n.$.addComponentOptions.setAttribute("hidden",""))};n.showAddPage=function(){n.changeView("view-add-page")};n.showAddComponentOptions=function(){n.$.addOptions.setAttribute("hidden","");n.$.addComponentOptions.removeAttribute("hidden")};n.showAddComponent=function(t,i,r){var u=new ElComponent,o=r.getAttribute("data-name"),f;for(var e in n.Site.Components)n.Site.Components[e].Name===o&&(f=n.Site.Components[e]);u.Name=f.Name;u.Props=f.Props;n.$.viewComponent.innerHTML="";n.$.viewComponent.appendChild(u);n.changeView("view-component");n.$.addComponentOptions.setAttribute("hidden","")}})();
//# sourceMappingURL=admin.min.js.map
